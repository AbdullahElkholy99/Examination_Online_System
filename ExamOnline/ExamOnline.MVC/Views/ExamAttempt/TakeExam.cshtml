@model ExamTakeVM

<form id="examForm" asp-action="SaveAllAnswers" method="post">
    @Html.AntiForgeryToken()

    @for (int i = 0; i < Model.Questions.Count; i++)
    {
        var q = Model.Questions[i];

        <div class="question-box">
            <h5>@(i + 1). @q.QuestionText</h5>

            @foreach (var c in q.Choices)
            {
                <div>
                    <input type="radio"
                           name="answers[@q.QuestionId]"
                           value="@c.ChoiceId"
                           required />
                    @c.ChoiceText
                </div>
            }
        </div>
        <hr />
    }

    <button type="submit" class="btn btn-danger">
        Submit Exam
    </button>
</form>

<script>
    let seconds = @Model.RemainingSeconds;

    setInterval(() => {
        seconds--;
        if (seconds <= 0) {
            document.getElementById("examForm").submit();
        }
    }, 1000);
</script>
